(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(26)),i(n(11)),i(n(12)),i(n(13))},11:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),o=function(){function e(e,t,n,i,o){this.width=e,this.height=t,this.start=n,this.win=i,this.blocks=o}return e.prototype.isWinningPoint=function(e){return this.win.equals(e)},e.prototype.isIllegalPoint=function(e){var t=this.blocks,n=this.width,i=this.height;return t.some(function(t){return t.equals(e)})||e.x<0||e.x>=n||e.y<0||e.y>=i},e.prototype.applyMove=function(e){for(var t=e.moves[e.moves.length-1],n=e.point;;){var o=n.clone();if(t===i.Move.Left)o.x--;else if(t===i.Move.Right)o.x++;else if(t===i.Move.Up)o.y--;else{if(t!==i.Move.Down)throw"unexpected move: "+t;o.y++}if(this.isWinningPoint(o))return o;if(this.isIllegalPoint(o))return n;n=o}},e.prototype.solve=function(){for(var e={},t=new i.MoveHistory(this.start,[]).getNextMoves().slice(),n=0;n<8e3&&t.length;){n++;var o=t.shift();if(o.point=this.applyMove(o),this.isWinningPoint(o.point))return o;var r=o.point.toString();e[r]||(t.push.apply(t,o.getNextMoves()),e[r]=o)}return null},e.prototype.print=function(){for(var e=this,t=e.width,n=e.height,i=e.start,o=e.win,r=e.blocks,l=[],a=function(e){for(var n=[],a=function(t){var l="_";o.x===t&&o.y===e&&(l="W"),i.x===t&&i.y===e&&(l="S"),r.forEach(function(n){n.x===t&&n.y===e&&(l="0")}),n.push(l)},s=0;s<t;s++)a(s);l.push(n)},s=0;s<n;s++)a(s);return l.map(function(e){return e.join("")}).join("\n")},e}();t.Level=o;var r=function(){return function(e,t){this.level=e,this.soln=t}}();t.SolvableLevel=r},12:function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Up=1]="Up",e[e.Down=2]="Down",e[e.Left=3]="Left",e[e.Right=4]="Right"}(i=t.Move||(t.Move={})),t.Moves=Object.keys(i).filter(function(e){return isNaN(Number(e))}).map(function(e){return i[e]});var o=function(){function e(e,t){this.point=e,this.moves=t}return e.prototype.last=function(){return this.moves[this.moves.length-1]},e.prototype.addMove=function(e){this.moves.push(e)},e.prototype.updatePoint=function(e){this.point=e},e.prototype.getNextMoves=function(){var n=this,i=this.last();return t.Moves.filter(function(e){return e!==i}).map(function(t){return new e(n.point,n.moves.concat([t]))})},e.prototype.printMoves=function(){return this.moves.map(function(e){return i[e]}).join(", ")},e}();t.MoveHistory=o},13:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.toString=function(){return this.x+","+this.y},e.prototype.equals=function(e){return this.toString()===e.toString()},e.prototype.randomWithin=function(t){for(var n,i=t.reduce(function(e,t){return e[t.toString()]=!0,e},{});!n||i[n.toString()];)n=new e(Math.floor(Math.random()*this.x),Math.floor(Math.random()*this.y));return n},e.fromString=function(t){var n=t.split(",");return new e(parseFloat(n[0]),parseFloat(n[1]))},e}();t.Point=i},20:function(e,t,n){e.exports=n(33)},26:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=n(13);var r=function(){function e(e,t,n,i){this.width=e,this.height=t,this.blockPercent=n,this.minMoves=i}return e.prototype.tryGenerateLevel=function(){var e=this.width,t=this.height,n=this.blockPercent,r=this.minMoves,l=new o.Point(e,t),a=l.randomWithin([]),s=l.randomWithin([a]),u=function(e){for(var t=[],n=0;n<e;n++)t.push(n);return t}(e*t*n).map(function(e){return l.randomWithin([a,s])}),c=new i.Level(e,t,s,a,u),v=c.solve();return v&&v.moves.length>r?new i.SolvableLevel(c,v):null},e.prototype.generateLevels=function(e,t){for(var n=[],i=0;n.length<e&&i<t;i++){var o=this.tryGenerateLevel();o&&n.push(o)}return n},e}();t.Generator=r},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i),r=n(4),l=n.n(r),a=n(5),s=n(2),u=n(3),c=n(17),v=n(14),h=n(19),f=n(6),p=n(1),d=function(){function e(t){Object(s.a)(this,e),this.level=void 0,this.soln=void 0,this.hero=void 0,this.level=t.level,this.soln=t.soln,this.hero=new p.MoveHistory(this.level.start,[])}return Object(u.a)(e,[{key:"moveHero",value:function(e){var t=this.level,n=this.hero;n.addMove(e);var i=t.applyMove(n);n.updatePoint(i)}}]),e}(),y={ArrowLeft:p.Move.Left,ArrowRight:p.Move.Right,ArrowUp:p.Move.Up,ArrowDown:p.Move.Down},w=function(){function e(t){var n=this;Object(s.a)(this,e),this.canvasElm=void 0,this.ctx=void 0,this.currentLevel=void 0,this.canvasElm=t,t.width=800,t.height=600,this.ctx=t.getContext("2d"),window.addEventListener("keydown",function(e){var t=y[e.code]||void 0;t&&n.handleMove(t),"KeyR"===e.code&&n.newLevel()})}return Object(u.a)(e,[{key:"handleMove",value:function(e){var t=this.currentLevel;t&&(t.moveHero(e),this.draw())}},{key:"newLevel",value:function(){var e=new p.Generator(10,8,.1*Math.random()+.2,10*Math.random()+5).generateLevels(1,1e3)[0];e&&console.log("solution:",e.soln.printMoves()),this.currentLevel=e&&new d(e),this.draw()}},{key:"draw",value:function(){var e=this.canvasElm,t=this.ctx,n=this.currentLevel,i=e.width,o=e.height;if(t.fillStyle="black",t.fillRect(0,0,i,o),!n)return t.font="20px monospace",t.fillStyle="white",void t.fillText("making level failed, try again",100,100);var r=i/n.level.width,l=o/n.level.height;t.strokeStyle="white";for(var a=0;a<n.level.height;a++)t.beginPath(),t.moveTo(0,a*l),t.lineTo(i,a*l),t.stroke();for(var s=0;s<n.level.width;s++)t.beginPath(),t.moveTo(s*r,0),t.lineTo(s*r,o),t.stroke();t.fillStyle="yellow",t.fillRect(n.level.start.x*r,n.level.start.y*l,r,l),t.fillStyle="lightgreen",t.fillRect(n.level.win.x*r,n.level.win.y*l,r,l),t.fillStyle="grey",n.level.blocks.forEach(function(e){t.fillRect(e.x*r,e.y*l,r,l)}),t.fillStyle="white",t.fillRect(n.hero.point.x*r+.2*r,n.hero.point.y*l+.2*l,.6*r,.6*l)}}]),e}();function m(){var e=Object(a.a)(["\n  width: 800px;\n  height: 600px;\n"]);return m=function(){return e},e}var g=f.a.canvas(m()),M=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(v.a)(t).call(this,e))).canvasRef=void 0,n.manager=void 0,n.canvasRef=o.a.createRef(),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.canvasRef.current;e&&(this.manager=new w(e),this.manager.newLevel())}},{key:"render",value:function(){return o.a.createElement(g,{ref:this.canvasRef})}}]),t}(o.a.Component);function x(){var e=Object(a.a)(["\n  padding: 2rem;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  flex-wrap: nowrap;\n"]);return x=function(){return e},e}var b=f.a.div(x());n(32);l.a.render(o.a.createElement(function(){return o.a.createElement(b,null,o.a.createElement("h1",null,"ice slide puzzle game"),o.a.createElement("p",null,"use arrow keys to move, R key to make new level"),o.a.createElement(M,null))},null),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.7d84ce32.chunk.js.map